<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daftar Tugas Harian</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .task-checkbox {
      appearance: none;
      width: 24px;
      height: 24px;
      border: 2px solid #d1d5db;
      border-radius: 6px;
      cursor: pointer;
      position: relative;
      flex-shrink: 0;
      transition: all 0.2s;
    }
    
    .task-checkbox:checked {
      background-color: #ec4899;
      border-color: #ec4899;
    }
    
    .task-checkbox:checked::after {
      content: '‚úì';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 16px;
      font-weight: bold;
    }
    
    .task-completed {
      text-decoration: line-through;
      color: #9ca3af;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .task-item {
      animation: fadeIn 0.3s ease-out;
    }

    .category-header {
      background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
      color: white;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 1.25rem;
      font-weight: 700;
      margin-top: 24px;
      margin-bottom: 12px;
    }

    .category-header:first-child {
      margin-top: 0;
    }
    
    @keyframes popIn {
      0% {
        transform: translate(-50%, -50%) scale(0.8);
        opacity: 0;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }
    
    @keyframes bounce {
      0%, 100% {
        transform: scale(1);
      }
      25% {
        transform: scale(1.1);
      }
      50% {
        transform: scale(0.95);
      }
      75% {
        transform: scale(1.05);
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div class="w-full h-full overflow-auto" style="background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);">
   <div class="min-h-full flex items-center justify-center p-4 py-12">
    <div class="w-full max-w-4xl bg-white rounded-3xl shadow-2xl p-8">
     <div class="text-center mb-8">
      <h1 class="text-5xl font-bold mb-2" style="color: #ec4899;">Tugas Harian</h1>
      <p class="text-gray-600 text-lg">Daftar lengkap pekerjaan rumah harian</p>
      <div id="clock" class="text-3xl font-semibold mt-4 inline-block px-6 py-3 rounded-xl shadow-lg" style="color: #8b5cf6; background: linear-gradient(135deg, #fce7f3 0%, #e9d5ff 100%); border: 2px solid #ec4899;"></div>
     </div>
     <div class="mb-8 bg-pink-50 rounded-xl p-6 flex items-center justify-around">
      <div class="text-center">
       <p class="text-sm text-gray-600 mb-1">Total Tugas</p>
       <p class="text-4xl font-bold" style="color: #ec4899;"><span id="totalTasks">0</span></p>
      </div>
      <div class="text-center">
       <p class="text-sm text-gray-600 mb-1">Selesai</p>
       <p class="text-4xl font-bold text-green-600"><span id="completedTasks">0</span></p>
      </div>
      <div class="text-center">
       <p class="text-sm text-gray-600 mb-1">Tersisa</p>
       <p class="text-4xl font-bold text-orange-600"><span id="remainingTasks">0</span></p>
      </div>
     </div>
     <div class="mb-6 flex gap-2 justify-center"><button id="filterAll" class="filter-btn px-6 py-3 rounded-lg font-medium transition-all active text-lg" style="background-color: #ec4899; color: white;"> Semua </button> <button id="filterActive" class="filter-btn px-6 py-3 rounded-lg font-medium transition-all bg-gray-200 text-gray-700 hover:bg-gray-300 text-lg"> Belum Selesai </button> <button id="filterCompleted" class="filter-btn px-6 py-3 rounded-lg font-medium transition-all bg-gray-200 text-gray-700 hover:bg-gray-300 text-lg"> Sudah Selesai </button>
     </div>
     <div id="taskList"></div>
     <div id="emptyState" class="text-center py-12 text-gray-400 hidden">
      <p class="text-xl">üìù Tidak ada tugas yang ditampilkan</p>
     </div>
    </div>
   </div>
  </div>
  <script>
    // SVG Icons
    const icons = {
      broom: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20m0-20l4 4m-4-4L8 6m8 14l-4 2-4-2"/></svg>',
      mop: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="2" width="6" height="10" rx="1"/><path d="M9 12v9m6-9v9M6 12v9m12-9v9"/></svg>',
      dishes: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="3"/></svg>',
      cook: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9h12M9 3v3m6-3v3m-8 6v9m6-9v9"/><rect x="3" y="6" width="18" height="3" rx="1"/></svg>',
      laundry: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3h18v18H3z"/><circle cx="12" cy="13" r="5"/><circle cx="7" cy="6" r="1"/><circle cx="11" cy="6" r="1"/></svg>',
      iron: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 15h15l3-3V9a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6z"/><path d="M3 15v3a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3"/></svg>',
      bed: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 17v4m20-4v4M4 13h16M2 13v4h20v-4a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4z"/><circle cx="7" cy="9" r="2"/></svg>',
      toilet: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 3h14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><path d="M7 11v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9"/></svg>',
      trash: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>',
      plant: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22v-8m0 0c-3 0-6-2-6-6 0 0 3 2 6 2s6-2 6-2c0 4-3 6-6 6z"/><path d="M12 14c3 0 6-2 6-6 0 0-3 2-6 2s-6-2-6-2c0 4 3 6 6 6z"/></svg>',
      cart: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>',
      home: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>'
    };

    // Data tugas rumah tangga lengkap berdasarkan kategori
    let tasks = [
      // Kebersihan Lantai & Ruangan
      { id: 1, text: 'Menyapu seluruh lantai rumah', icon: 'broom', completed: false, category: 'Kebersihan Lantai & Ruangan' },
      { id: 2, text: 'Mengepel lantai', icon: 'mop', completed: false, category: 'Kebersihan Lantai & Ruangan' },
      { id: 3, text: 'Menyapu halaman depan dan belakang', icon: 'broom', completed: false, category: 'Kebersihan Lantai & Ruangan' },
      { id: 4, text: 'Membersihkan debu di meja dan furniture', icon: 'mop', completed: false, category: 'Kebersihan Lantai & Ruangan' },
      { id: 5, text: 'Membersihkan jendela dan kaca', icon: 'home', completed: false, category: 'Kebersihan Lantai & Ruangan' },
      { id: 6, text: 'Merapikan dan membersihkan ruang tamu', icon: 'home', completed: false, category: 'Kebersihan Lantai & Ruangan' },
      { id: 7, text: 'Menyedot debu dengan vacuum cleaner', icon: 'broom', completed: false, category: 'Kebersihan Lantai & Ruangan' },
      
      // Dapur & Peralatan Makan
      { id: 8, text: 'Mencuci piring dan peralatan dapur', icon: 'dishes', completed: false, category: 'Dapur & Peralatan Makan' },
      { id: 9, text: 'Membersihkan kompor dan area memasak', icon: 'cook', completed: false, category: 'Dapur & Peralatan Makan' },
      { id: 10, text: 'Membersihkan kulkas dan membuang makanan basi', icon: 'home', completed: false, category: 'Dapur & Peralatan Makan' },
      { id: 11, text: 'Membersihkan wastafel dapur', icon: 'dishes', completed: false, category: 'Dapur & Peralatan Makan' },
      { id: 12, text: 'Merapikan lemari dapur dan piring', icon: 'home', completed: false, category: 'Dapur & Peralatan Makan' },
      { id: 13, text: 'Membersihkan oven dan microwave', icon: 'cook', completed: false, category: 'Dapur & Peralatan Makan' },
      { id: 14, text: 'Membersihkan talenan dan pisau', icon: 'dishes', completed: false, category: 'Dapur & Peralatan Makan' },
      
      // Memasak
      { id: 15, text: 'Memasak sarapan', icon: 'cook', completed: false, category: 'Memasak' },
      { id: 16, text: 'Memasak makan siang', icon: 'cook', completed: false, category: 'Memasak' },
      { id: 17, text: 'Memasak makan malam', icon: 'cook', completed: false, category: 'Memasak' },
      { id: 18, text: 'Menyiapkan lauk pauk', icon: 'cook', completed: false, category: 'Memasak' },
      { id: 19, text: 'Membuat minuman untuk keluarga', icon: 'cook', completed: false, category: 'Memasak' },
      { id: 20, text: 'Menyiapkan bekal', icon: 'cook', completed: false, category: 'Memasak' },
      
      // Cucian & Pakaian
      { id: 21, text: 'Mencuci pakaian kotor', icon: 'laundry', completed: false, category: 'Cucian & Pakaian' },
      { id: 22, text: 'Menjemur pakaian', icon: 'laundry', completed: false, category: 'Cucian & Pakaian' },
      { id: 23, text: 'Mengangkat pakaian kering', icon: 'laundry', completed: false, category: 'Cucian & Pakaian' },
      { id: 24, text: 'Melipat pakaian bersih', icon: 'laundry', completed: false, category: 'Cucian & Pakaian' },
      { id: 25, text: 'Menyetrika pakaian', icon: 'iron', completed: false, category: 'Cucian & Pakaian' },
      { id: 26, text: 'Menyimpan pakaian ke lemari', icon: 'laundry', completed: false, category: 'Cucian & Pakaian' },
      { id: 27, text: 'Menjodohkan dan melipat kaus kaki', icon: 'laundry', completed: false, category: 'Cucian & Pakaian' },
      { id: 28, text: 'Memisahkan pakaian kotor berdasarkan warna', icon: 'laundry', completed: false, category: 'Cucian & Pakaian' },
      
      // Kamar Tidur
      { id: 29, text: 'Merapikan tempat tidur', icon: 'bed', completed: false, category: 'Kamar Tidur' },
      { id: 30, text: 'Mengganti seprai dan sarung bantal', icon: 'bed', completed: false, category: 'Kamar Tidur' },
      { id: 31, text: 'Mencuci seprai dan bed cover', icon: 'laundry', completed: false, category: 'Kamar Tidur' },
      { id: 32, text: 'Merapikan lemari pakaian', icon: 'home', completed: false, category: 'Kamar Tidur' },
      { id: 33, text: 'Membersihkan bawah tempat tidur', icon: 'broom', completed: false, category: 'Kamar Tidur' },
      
      // Kamar Mandi & Toilet
      { id: 34, text: 'Membersihkan kamar mandi', icon: 'toilet', completed: false, category: 'Kamar Mandi & Toilet' },
      { id: 35, text: 'Membersihkan toilet', icon: 'toilet', completed: false, category: 'Kamar Mandi & Toilet' },
      { id: 36, text: 'Menyikat bak mandi', icon: 'toilet', completed: false, category: 'Kamar Mandi & Toilet' },
      { id: 37, text: 'Membersihkan cermin kamar mandi', icon: 'home', completed: false, category: 'Kamar Mandi & Toilet' },
      { id: 38, text: 'Mengisi sabun, shampoo, dan tissue', icon: 'home', completed: false, category: 'Kamar Mandi & Toilet' },
      { id: 39, text: 'Membersihkan wastafel', icon: 'toilet', completed: false, category: 'Kamar Mandi & Toilet' },
      
      // Sampah & Kebersihan Umum
      { id: 40, text: 'Membuang sampah', icon: 'trash', completed: false, category: 'Sampah & Kebersihan' },
      { id: 41, text: 'Memisahkan sampah organik dan anorganik', icon: 'trash', completed: false, category: 'Sampah & Kebersihan' },
      { id: 42, text: 'Mengganti kantong sampah baru', icon: 'trash', completed: false, category: 'Sampah & Kebersihan' },
      { id: 43, text: 'Membersihkan tempat sampah', icon: 'trash', completed: false, category: 'Sampah & Kebersihan' },
      
      // Tanaman & Halaman
      { id: 44, text: 'Menyiram tanaman', icon: 'plant', completed: false, category: 'Tanaman & Halaman' },
      { id: 45, text: 'Memangkas tanaman dan rumput', icon: 'plant', completed: false, category: 'Tanaman & Halaman' },
      { id: 46, text: 'Membersihkan pot bunga', icon: 'plant', completed: false, category: 'Tanaman & Halaman' },
      { id: 47, text: 'Menyapu daun-daun kering', icon: 'broom', completed: false, category: 'Tanaman & Halaman' },
      
      // Belanja & Persiapan
      { id: 48, text: 'Belanja bahan makanan', icon: 'cart', completed: false, category: 'Belanja & Persiapan' },
      { id: 49, text: 'Membuat daftar belanjaan', icon: 'home', completed: false, category: 'Belanja & Persiapan' },
      { id: 50, text: 'Membeli keperluan rumah tangga', icon: 'cart', completed: false, category: 'Belanja & Persiapan' },
      { id: 51, text: 'Menyimpan belanjaan ke tempatnya', icon: 'home', completed: false, category: 'Belanja & Persiapan' },
      
      // Lain-lain
      { id: 52, text: 'Memberi makan hewan peliharaan', icon: 'home', completed: false, category: 'Lain-lain' },
      { id: 53, text: 'Mengganti lampu yang mati', icon: 'home', completed: false, category: 'Lain-lain' },
      { id: 54, text: 'Mengisi ulang dispenser air', icon: 'home', completed: false, category: 'Lain-lain' },
      { id: 55, text: 'Merapikan remote dan kabel', icon: 'home', completed: false, category: 'Lain-lain' },
      { id: 56, text: 'Merapikan sepatu di rak', icon: 'home', completed: false, category: 'Lain-lain' },
      { id: 57, text: 'Merapikan buku dan majalah', icon: 'home', completed: false, category: 'Lain-lain' },
      { id: 58, text: 'Merapikan mainan anak', icon: 'home', completed: false, category: 'Lain-lain' },
      { id: 59, text: 'Mencuci keset dan lap', icon: 'laundry', completed: false, category: 'Lain-lain' },
      { id: 60, text: 'Merapikan kursi dan meja makan', icon: 'home', completed: false, category: 'Lain-lain' }
    ];
    
    let currentFilter = 'all';
    
    // Get today's date in Jakarta timezone as YYYY-MM-DD format
    function getTodayDate() {
      const now = new Date();
      const jakartaTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Jakarta' }));
      return jakartaTime.toISOString().split('T')[0]; // Format: YYYY-MM-DD
    }
    
    // Load dari localStorage jika ada
    function loadTasks() {
      const saved = localStorage.getItem('householdTasks');
      const lastResetDate = localStorage.getItem('lastResetDate');
      const today = getTodayDate();
      
      // Check if it's a new day, reset all tasks
      if (lastResetDate !== today) {
        // Reset all tasks to incomplete
        tasks.forEach(task => {
          task.completed = false;
        });
        localStorage.setItem('lastResetDate', today);
        saveTasks();
      } else if (saved) {
        // Load saved tasks for today
        const savedTasks = JSON.parse(saved);
        savedTasks.forEach(savedTask => {
          const task = tasks.find(t => t.id === savedTask.id);
          if (task) {
            task.completed = savedTask.completed;
          }
        });
      }
    }
    
    // Simpan ke localStorage
    function saveTasks() {
      localStorage.setItem('householdTasks', JSON.stringify(tasks));
    }
    
    // Render tugas berdasarkan kategori
    function renderTasks() {
      const taskList = document.getElementById('taskList');
      const emptyState = document.getElementById('emptyState');
      
      let filteredTasks = tasks;
      if (currentFilter === 'active') {
        filteredTasks = tasks.filter(t => !t.completed);
      } else if (currentFilter === 'completed') {
        filteredTasks = tasks.filter(t => t.completed);
      }
      
      if (filteredTasks.length === 0) {
        taskList.innerHTML = '';
        emptyState.classList.remove('hidden');
        updateStats();
        return;
      }
      
      emptyState.classList.add('hidden');
      
      // Kelompokkan tugas berdasarkan kategori
      const categories = {};
      filteredTasks.forEach(task => {
        if (!categories[task.category]) {
          categories[task.category] = [];
        }
        categories[task.category].push(task);
      });
      
      let html = '';
      Object.keys(categories).forEach(category => {
        html += `<div class="category-header">${category}</div>`;
        html += '<div class="space-y-3 mb-4">';
        categories[category].forEach(task => {
          html += `
            <div class="task-item flex items-center gap-4 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl hover:shadow-md transition-all" data-id="${task.id}">
              <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} onchange="toggleTask(${task.id})" />
              <div style="color: #ec4899; flex-shrink: 0;">${icons[task.icon]}</div>
              <span class="flex-1 text-lg ${task.completed ? 'task-completed' : ''}" style="color: ${task.completed ? '#9ca3af' : '#1f2937'}; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-height: 1.4;">
                ${task.text}
              </span>
            </div>
          `;
        });
        html += '</div>';
      });
      
      taskList.innerHTML = html;
      updateStats();
    }
    
    // Update statistik
    function updateStats() {
      const total = tasks.length;
      const completed = tasks.filter(t => t.completed).length;
      const remaining = total - completed;
      
      document.getElementById('totalTasks').textContent = total;
      document.getElementById('completedTasks').textContent = completed;
      document.getElementById('remainingTasks').textContent = remaining;
    }
    
    // Toggle status tugas
    function toggleTask(id) {
      const task = tasks.find(t => t.id === id);
      if (task) {
        task.completed = !task.completed;
        saveTasks();
        renderTasks();
        
        // Check if all tasks are completed
        const allCompleted = tasks.every(t => t.completed);
        if (allCompleted) {
          showCompletionNotification();
        }
      }
    }
    
    // Show completion notification
    function showCompletionNotification() {
      // Create backdrop
      const backdrop = document.createElement('div');
      backdrop.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 999;
        animation: fadeIn 0.3s ease-out;
        backdrop-filter: blur(8px);
      `;
      
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        background: white;
        padding: 48px 56px;
        border-radius: 32px;
        box-shadow: 0 25px 80px rgba(236, 72, 153, 0.4);
        z-index: 1000;
        text-align: center;
        animation: popIn 0.5s ease-out forwards;
        max-width: 90%;
        width: 500px;
      `;
      
      notification.innerHTML = `
        <div style="
          width: 120px;
          height: 120px;
          margin: 0 auto 24px;
          background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 64px;
          animation: bounce 0.6s ease-out;
          box-shadow: 0 10px 40px rgba(236, 72, 153, 0.3);
        ">üéâ</div>
        <h2 style="
          font-size: 36px;
          font-weight: bold;
          margin-bottom: 16px;
          background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        ">Luar Biasa!</h2>
        <p style="font-size: 20px; margin-bottom: 12px; color: #374151; font-weight: 500;">
          Semua 60 tugas hari ini telah selesai! ‚ú®
        </p>
        <p style="font-size: 16px; color: #6b7280; margin-bottom: 32px;">
          Besok adalah hari baru dengan tugas segar yang akan di-reset otomatis.
        </p>
        <button id="closeNotif" style="
          padding: 16px 48px;
          background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
          color: white;
          border: none;
          border-radius: 16px;
          font-size: 18px;
          font-weight: 700;
          cursor: pointer;
          transition: all 0.3s;
          box-shadow: 0 4px 20px rgba(236, 72, 153, 0.3);
        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 30px rgba(236, 72, 153, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(236, 72, 153, 0.3)'">
          Tutup
        </button>
      `;
      
      document.body.appendChild(backdrop);
      document.body.appendChild(notification);
      
      document.getElementById('closeNotif').addEventListener('click', () => {
        notification.style.animation = 'popIn 0.3s ease-out reverse';
        backdrop.style.animation = 'fadeIn 0.3s ease-out reverse';
        setTimeout(() => {
          notification.remove();
          backdrop.remove();
        }, 300);
      });
      
      // Close on backdrop click
      backdrop.addEventListener('click', () => {
        document.getElementById('closeNotif').click();
      });
    }
    
    // Filter buttons
    document.getElementById('filterAll').addEventListener('click', () => {
      currentFilter = 'all';
      updateFilterButtons();
      renderTasks();
    });
    
    document.getElementById('filterActive').addEventListener('click', () => {
      currentFilter = 'active';
      updateFilterButtons();
      renderTasks();
    });
    
    document.getElementById('filterCompleted').addEventListener('click', () => {
      currentFilter = 'completed';
      updateFilterButtons();
      renderTasks();
    });
    
    function updateFilterButtons() {
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
        btn.style.backgroundColor = '#e5e7eb';
        btn.style.color = '#374151';
      });
      
      const activeBtn = document.getElementById(`filter${currentFilter.charAt(0).toUpperCase() + currentFilter.slice(1)}`);
      activeBtn.classList.add('active');
      activeBtn.style.backgroundColor = '#ec4899';
      activeBtn.style.color = 'white';
    }
    
    // Update clock with Asia/Jakarta timezone
    function updateClock() {
      const now = new Date();
      
      // Convert to Asia/Jakarta timezone
      const jakartaTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Jakarta' }));
      
      let hours = jakartaTime.getHours();
      const minutes = jakartaTime.getMinutes();
      const seconds = jakartaTime.getSeconds();
      
      // Determine AM/PM
      const ampm = hours >= 12 ? 'PM' : 'AM';
      
      // Convert to 12-hour format
      hours = hours % 12;
      hours = hours ? hours : 12; // 0 should be 12
      
      // Format with leading zeros
      const formattedTime = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')} ${ampm}`;
      
      document.getElementById('clock').textContent = formattedTime;
    }
    
    // Check for date change periodically (every minute)
    function checkDateChange() {
      const currentDate = getTodayDate();
      const lastResetDate = localStorage.getItem('lastResetDate');
      
      if (lastResetDate && lastResetDate !== currentDate) {
        // It's a new day! Reset all tasks
        tasks.forEach(task => {
          task.completed = false;
        });
        localStorage.setItem('lastResetDate', currentDate);
        saveTasks();
        renderTasks();
      }
    }
    
    // Expose functions globally
    window.toggleTask = toggleTask;
    
    // Init
    loadTasks();
    renderTasks();
    updateClock();
    setInterval(updateClock, 1000);
    
    // Check for date change every minute
    setInterval(checkDateChange, 60000);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b806f158571e793',t:'MTc2NzQyMTY4NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
